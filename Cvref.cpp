#include "Cvref.hpp"
#include "Reg.hpp"

enum {
    DAC1CON = 0xBF802380,
        ON = 15,
        DACOE = 8,
        REFSEL_SHIFT = 0, REFSEL_CLR = 3
};

//=============================================================================
    void        Cvref::on               (bool tf)
//=============================================================================
{
    Reg::setbit(DAC1CON, 1<<ON, tf);
}

//=============================================================================
    void        Cvref::out              (bool tf)
//=============================================================================
{
    Reg::setbit(DAC1CON, 1<<DACOE, tf);
}

//=============================================================================
    void        Cvref::refsel           (REFSEL e)
//=============================================================================
{
    Reg::clrbit(DAC1CON, REFSEL_CLR<<REFSEL_SHIFT);
    Reg::setbit(DAC1CON, e<<REFSEL_SHIFT);
}

//dac level 0-31
//=============================================================================
    void        Cvref::dacdat           (uint8_t v)
//=============================================================================
{
    Reg::val(DAC1CON + 2, v);
}
